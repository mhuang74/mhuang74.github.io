<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />

  
  <link href='&#x2F;icons&#x2F;site.webmanifest' rel="manifest" />
  
  
  <link color="#5bbad5" href='&#x2F;icons&#x2F;safari-pinned-tab.svg' rel="mask-icon" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-16x16.png' rel="icon" sizes="16x16" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-32x32.png' rel="icon" sizes="32x32" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;apple-touch-icon.png' rel="apple-touch-icon" sizes="180x180" />
  

  

  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css" integrity="sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css" integrity="sha384-IJLmUY0f1ePPX6uSCJ9Bxik64/meJmjSYD7dHaJqTXXEBE4y+Oe9P2KBZa/z7p0Q" crossorigin="anonymous">
  <link href="https://michaelhuang.xyz/deep-thought.css" rel="stylesheet" />
  

<script src="https://cdn.jsdelivr.net/npm/vega@5.21.0" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.2" crossorigin="anonymous"></script>



  <title>
    
mhuang74&#x27;s blog | Google Ads Asset-based Ad Extensions

  </title>

  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3VYKYSGLFF"></script>
  <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-3VYKYSGLFF");
  </script>
  
  

  
</head>

<body class="has-background-white">
  <nav aria-label="section navigation" class="navbar is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="https:&#x2F;&#x2F;michaelhuang.xyz">mhuang74&#x27;s blog</a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          
          
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;michaelhuang.xyz&#x2F;">
            Home
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;michaelhuang.xyz&#x2F;posts">
            Posts
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;michaelhuang.xyz&#x2F;tags">
            Tags
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;michaelhuang.xyz&#x2F;categories">
            Categories
          </a>
          
          
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  
  

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title">
            Google Ads Asset-based Ad Extensions
          </h1>
          <p class="subtitle">Quick look at adoption</p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-calendar-alt"></i>
  </span>
  <span><time datetime="2022-04-12">April 12, 2022</time></span>
</span>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-clock"></i>
  </span>
  <span>8 min,</span>
  <span class="icon">
    <i class="fas fa-pencil-alt"></i>
  </span>
  <span>1577 words</span>
</span>

            </div>
            <div class="column">
              
              
<p>
  Categories:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://michaelhuang.xyz/categories/ppc/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-cube"></i>
      </span>
      <span>PPC</span>
    </span>
  </a>
  
</p>

              
            </div>
            <div class="column has-text-right-desktop">
              
              
<p>
  Tags:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://michaelhuang.xyz/tags/chart/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>chart</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://michaelhuang.xyz/tags/google-ads/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>google ads</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://michaelhuang.xyz/tags/zola/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>zola</span>
    </span>
  </a>
  
</p>

              
            </div>
          </div>
          <div class="content mt-2">
            <p>In another <a href="https://michaelhuang.xyz/posts/quick-look-at-charts/">post</a>, I write about plotting charts in blog posts generated by static site generator <a rel="noopener nofollow noreferrer" target="_blank" href="https://www.getzola.org/">Zola</a>. Here I apply the technique to look at Google Ads performance data.  Nothing sophisticated. I just want to follow the daily impressions trend for Asset-based Ad Extensions since the start of 2022 as mandated <a rel="noopener nofollow noreferrer" target="_blank" href="https://ads-developers.googleblog.com/2022/01/revised-schedule-for-auto-migration-of.html">auto migration</a> begins.</p>
<p>Csv data used is available <a href="/all_asset_field_type_view_ytd_cleaned.csv">here</a> and <a href="/combined_ad_extensions_ytd.csv">here</a></p>
<span id="continue-reading"></span><h2 id="getting-data">Getting Data</h2>
<p>Google's <a rel="noopener nofollow noreferrer" target="_blank" href="https://ads-developers.googleblog.com/2022/01/revised-schedule-for-auto-migration-of.html">schedule</a> for auto migration starts with Sitelinks, Callout, and Structured Snippets on Jan 10th, 2022. The second batch starts on Apr 8th and includes Call, App, Hotel Callout, and Price extensions. Since customers can also self-migrate ahead of time, it would be interesting to see the real traffic shift from Feeditem to Asset-based with respect to each Ad Extension type.</p>
<p>I use a tool called <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/mhuang74/mcc-find-rs">mccfind</a> (one of my Rust learning projects) to grab extension level daily traffic via below <a rel="noopener nofollow noreferrer" target="_blank" href="https://developers.google.com/google-ads/api/docs/query/overview">GAQL</a>. Query is applied across ~1000 Google Ads accounts. Results are aggregated by Date and Extension Type, and saved as plain text in CSV format.</p>
<pre style="background-color:#2b303b;color:#6c7079;"><code><span style="color:#abb2bf;">mccfind -q asset_field_type_view_ytd --groupby &quot;asset_field_type_view.field_type&quot; --groupby &quot;segments.date&quot;  -o all_asset_field_type_view_ytd.csv
</span></code></pre>
<p><strong>GAQL to get YTD traffic across all Asset-based Ad Extension Types</strong></p>
<pre data-lang="sql" style="background-color:#2b303b;color:#6c7079;" class="language-sql "><code class="language-sql" data-lang="sql"><span style="color:#abb2bf;">	</span><span style="color:#cd74e8;">SELECT 
</span><span style="color:#abb2bf;">	  </span><span style="color:#db9d63;">asset_field_type_view</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">field_type</span><span style="color:#abb2bf;">, 
</span><span style="color:#abb2bf;">	  </span><span style="color:#db9d63;">segments</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">date</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">	  </span><span style="color:#db9d63;">metrics</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">impressions</span><span style="color:#abb2bf;">, 
</span><span style="color:#abb2bf;">	  </span><span style="color:#db9d63;">metrics</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">clicks</span><span style="color:#abb2bf;">, 
</span><span style="color:#abb2bf;">	  </span><span style="color:#db9d63;">metrics</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">cost_micros</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">	  </span><span style="color:#db9d63;">customer</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">currency_code  
</span><span style="color:#abb2bf;">	</span><span style="color:#cd74e8;">FROM</span><span style="color:#abb2bf;"> asset_field_type_view 
</span><span style="color:#abb2bf;">	</span><span style="color:#cd74e8;">WHERE 
</span><span style="color:#abb2bf;">	  </span><span style="color:#db9d63;">segments</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">year </span><span style="color:#adb7c9;">IN</span><span style="color:#abb2bf;"> (</span><span style="color:#db9d63;">2022</span><span style="color:#abb2bf;">)
</span><span style="color:#abb2bf;">	  </span><span style="color:#adb7c9;">AND </span><span style="color:#db9d63;">metrics</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">impressions </span><span style="color:#adb7c9;">&gt; </span><span style="color:#db9d63;">1
</span><span style="color:#abb2bf;">	</span><span style="color:#cd74e8;">ORDER BY 
</span><span style="color:#abb2bf;">	  </span><span style="color:#db9d63;">asset_field_type_view</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">field_type</span><span style="color:#abb2bf;">, </span><span style="color:#db9d63;">segments</span><span style="color:#abb2bf;">.</span><span style="color:#db9d63;">date
</span><span style="color:#abb2bf;">
</span></code></pre>
<p>Output file is cleaned up a bit to remove extra <code>&quot;</code> quotation marks in the <em>date</em> column and <code>.</code> periods from header names (e.g. from <code>segments.date</code> to just <code>date</code>).</p>
<pre style="background-color:#2b303b;color:#6c7079;"><code><span style="color:#abb2bf;">$ cat all_asset_field_type_view_ytd.csv | sed &#39;s/[a-z_]*\.//g&#39; | sed &#39;s/&quot;//g&#39; &gt; all_asset_field_type_view_ytd_cleaned.csv
</span></code></pre>
<p>Here's a peek at the <a href="/all_asset_field_type_view_ytd_cleaned.csv">cleaned up csv</a> . Please note that the <em>cost</em> column isn't summed up correctly since it's aggregated without currency conversion.</p>
<p><strong>a peek of all_asset_field_type_view_ytd_cleaned.csv</strong></p>
<pre style="background-color:#2b303b;color:#6c7079;"><code><span style="color:#abb2bf;">field_type,date,impressions_sum_sum,clicks_sum_sum,cost_micros_sum_sum
</span><span style="color:#abb2bf;">Call,2022-02-11,63,2,139000000
</span><span style="color:#abb2bf;">Call,2022-02-12,63,4,242000000
</span><span style="color:#abb2bf;">Call,2022-02-14,95,7,301000000
</span><span style="color:#abb2bf;">Call,2022-02-15,93,5,326000000
</span><span style="color:#abb2bf;">Call,2022-02-16,404,8,196000000
</span><span style="color:#abb2bf;">Call,2022-02-17,443,13,460000000
</span><span style="color:#abb2bf;">Call,2022-02-18,454,10,274000000
</span><span style="color:#abb2bf;">Call,2022-02-19,467,7,177000000
</span><span style="color:#abb2bf;">Call,2022-02-20,355,7,171000000
</span><span style="color:#abb2bf;">
</span></code></pre>
<h2 id="asset-based-traffic-by-extension-type">Asset-based Traffic by Extension Type</h2>
<p>Ad Extensions are extra advertisement material that appear next to Ads. They help reinforce branding or product niche, but may not be clicked on. Hence, lets look at daily total <em>impressions</em> as opposed to <em>clicks</em> or <em>cost</em>. </p>
<p>Here's the code to visualize daily impressions trend from csv above using <a rel="noopener nofollow noreferrer" target="_blank" href="https://vega.github.io/vega-lite/">vega-lite</a>.</p>
<p><strong>vega-lite specs</strong></p>
<pre data-lang="json" style="background-color:#2b303b;color:#6c7079;" class="language-json "><code class="language-json" data-lang="json"><span style="color:#abb2bf;">\{</span><span style="background-color:#e05252;color:#ffffff;">%</span><span style="color:#abb2bf;"> </span><span style="background-color:#e05252;color:#ffffff;">vega_chart(id=</span><span style="color:#9acc76;">&quot;vis&quot;</span><span style="background-color:#e05252;color:#ffffff;">)</span><span style="color:#abb2bf;"> </span><span style="background-color:#e05252;color:#ffffff;">%\</span><span style="color:#abb2bf;">}
</span><span style="color:#abb2bf;">
</span><span style="color:#abb2bf;">    </span><span style="font-style:italic;color:#5f697a;">// Assign the specification to a local variable vlSpec.
</span><span style="color:#abb2bf;">    var vlSpec = {
</span><span style="color:#abb2bf;">        </span><span style="color:#9acc76;">&quot;$schema&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;https://vega.github.io/schema/vega-lite/v5.json&quot;</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">        </span><span style="color:#9acc76;">&quot;width&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#db9d63;">450</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">        </span><span style="color:#9acc76;">&quot;height&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#db9d63;">300</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">        </span><span style="color:#9acc76;">&quot;data&quot;</span><span style="color:#abb2bf;">: {</span><span style="color:#9acc76;">&quot;url&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;/all_asset_field_type_view_ytd_cleaned.csv&quot;</span><span style="color:#abb2bf;">},
</span><span style="color:#abb2bf;">        </span><span style="color:#9acc76;">&quot;mark&quot;</span><span style="color:#abb2bf;">: {
</span><span style="color:#abb2bf;">            </span><span style="color:#9acc76;">&quot;type&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;bar&quot;</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">            </span><span style="color:#9acc76;">&quot;tooltip&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#db9d63;">true
</span><span style="color:#abb2bf;">        },
</span><span style="color:#abb2bf;">        </span><span style="color:#9acc76;">&quot;encoding&quot;</span><span style="color:#abb2bf;">: {
</span><span style="color:#abb2bf;">            </span><span style="color:#9acc76;">&quot;x&quot;</span><span style="color:#abb2bf;">: {
</span><span style="color:#abb2bf;">                </span><span style="color:#9acc76;">&quot;field&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;date&quot;</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">                </span><span style="color:#9acc76;">&quot;type&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;temporal&quot;</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">                </span><span style="color:#9acc76;">&quot;bin&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#db9d63;">false</span><span style="color:#abb2bf;">, 
</span><span style="color:#abb2bf;">                </span><span style="color:#9acc76;">&quot;sort&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;x&quot;
</span><span style="color:#abb2bf;">            },
</span><span style="color:#abb2bf;">            </span><span style="color:#9acc76;">&quot;y&quot;</span><span style="color:#abb2bf;">: {
</span><span style="color:#abb2bf;">                </span><span style="color:#9acc76;">&quot;field&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;impressions_sum_sum&quot;</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">                </span><span style="color:#9acc76;">&quot;type&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;quantitative&quot;</span><span style="color:#abb2bf;">,
</span><span style="color:#abb2bf;">            },
</span><span style="color:#abb2bf;">            </span><span style="color:#9acc76;">&quot;color&quot;</span><span style="color:#abb2bf;">: {</span><span style="color:#9acc76;">&quot;field&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;field_type&quot;</span><span style="color:#abb2bf;">, </span><span style="color:#9acc76;">&quot;type&quot;</span><span style="color:#abb2bf;">: </span><span style="color:#9acc76;">&quot;nominal&quot;</span><span style="color:#abb2bf;">},
</span><span style="color:#abb2bf;">        }
</span><span style="color:#abb2bf;">    };
</span><span style="color:#abb2bf;">
</span><span style="color:#abb2bf;">    </span><span style="font-style:italic;color:#5f697a;">// Embed the visualization in the container with id `vis`
</span><span style="color:#abb2bf;">    vegaEmbed(&#39;#vis&#39;, vlSpec).then(function(result) {
</span><span style="color:#abb2bf;">    </span><span style="font-style:italic;color:#5f697a;">// Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
</span><span style="color:#abb2bf;">    }).catch(console.error);
</span><span style="color:#abb2bf;">
</span><span style="color:#abb2bf;">\{</span><span style="background-color:#e05252;color:#ffffff;">%</span><span style="color:#abb2bf;"> </span><span style="background-color:#e05252;color:#ffffff;">end</span><span style="color:#abb2bf;"> </span><span style="background-color:#e05252;color:#ffffff;">%\</span><span style="color:#abb2bf;">}
</span></code></pre>
<p><strong>YTD Daily Impressions by Asset-based Extension Type</strong></p>
<div id="vis"></div>
<script>// Assign the specification to a local variable vlSpec.
    var vlSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 450,
        "height": 300,
        "data": {"url": "/all_asset_field_type_view_ytd_cleaned.csv"},
        "mark": {
            "type": "bar",
            "tooltip": true
        },
        "encoding": {
            "x": {
                "field": "date",
                "type": "temporal",
                "bin": false, 
                "sort": "x"
            },
            "y": {
                "field": "impressions_sum_sum",
                "type": "quantitative",
            },
            "color": {"field": "field_type", "type": "nominal"},
        }
    };

    // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis', vlSpec).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);</script>
<p>From the plot, it's clear that most of the traffic comes from Callout and Sitelinks Extensions. Structured Snippets has a minor share and rest of the extension types don't even show up.</p>
<p>In terms of migration dates, compared to original announced migration date of Jan 10th, 2022, Asset-based traffic doesn't start to increase significantly until after Feb 9th, reaching a plateau around Feb 17th.</p>
<h2 id="tracking-state-of-asset-based-migration">Tracking State of Asset-based Migration</h2>
<p>To track how much of Ad Extensions traffic is migrated to Asset-based, lets plot YTD Daily Impressions from both Asset-based and Feeditem.</p>
<p>First step is to download Feeditem traffic via this GAQL.</p>
<pre style="background-color:#2b303b;color:#6c7079;"><code><span style="color:#abb2bf;">mccfind -q feed_placeholder_view_ytd --groupby &quot;feed_placeholder_view.placeholder_type&quot; --groupby &quot;segments.date&quot;  -o all_feed_placeholder_view_ytd.csv
</span></code></pre>
<p><strong>GAQL to download Feeditem traffic for all Ad Extensions</strong></p>
<pre style="background-color:#2b303b;color:#6c7079;"><code><span style="color:#abb2bf;">	SELECT
</span><span style="color:#abb2bf;">	  feed_placeholder_view.placeholder_type,
</span><span style="color:#abb2bf;">	  segments.date,
</span><span style="color:#abb2bf;">	  metrics.impressions,
</span><span style="color:#abb2bf;">	  metrics.clicks,
</span><span style="color:#abb2bf;">	  metrics.cost_micros,
</span><span style="color:#abb2bf;">	  customer.currency_code
</span><span style="color:#abb2bf;">	FROM feed_placeholder_view
</span><span style="color:#abb2bf;">	WHERE
</span><span style="color:#abb2bf;">	  segments.year IN (2022) 
</span><span style="color:#abb2bf;">	  AND metrics.impressions &gt; 1
</span><span style="color:#abb2bf;">	ORDER BY 
</span><span style="color:#abb2bf;">	  feed_placeholder_view.placeholder_type, segments.date
</span></code></pre>
<p>To combine Feeditem and Asset-based Sitelinks traffic into a single plot, the two csv files need to be combined. A new <em>category</em> column indicates a row as either Feeditem or Asset-based.</p>
<pre style="background-color:#2b303b;color:#6c7079;"><code><span style="color:#abb2bf;">$ echo &quot;category,type,date,impressions,clicks,cost_micros&quot; &gt; combined_ad_extensions_ytd.csv
</span><span style="color:#abb2bf;">$ cat all_feed_placeholder_view_ytd.csv | grep -v &quot;metrics&quot; | awk &#39;{print &quot;Feeditem,&quot;$0}&#39; | sed &#39;s/&quot;//g&#39; &gt;&gt; combined_ad_extensions_ytd.csv
</span><span style="color:#abb2bf;">$ cat all_asset_field_type_view_ytd.csv | grep -v &quot;metrics&quot; | awk &#39;{print &quot;Asset,&quot;$0}&#39; | sed &#39;s/&quot;//g&#39; &gt;&gt; combined_ad_extensions_ytd.csv
</span></code></pre>
<p>Here's a peak at Sitelinks data from the <a href="/combined_ad_extensions_ytd.csv">combined csv</a>. It's interesting that Asset-based Sitelinks already has some, albeit tiny, traffic since Jan 1st, 2022. Some customers started early.</p>
<p><strong>a peak at combined_ad_extensions_ytd.csv for Sitelinks</strong></p>
<pre style="background-color:#2b303b;color:#6c7079;"><code><span style="color:#abb2bf;">category,type,date,impressions,clicks,cost_micros
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-01,11984164,1247627,11275573051411
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-02,11298841,1350908,13249915791348
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-03,9621194,1338908,15113704485461
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-04,9561097,1338991,13247847465453
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-05,10302409,1348804,13158450989466
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-06,10447048,1346719,13202233194666
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-07,12585345,1696935,14326800925566
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-08,13678997,1905887,15711076632489
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-09,12428273,1730375,13905504607638
</span><span style="color:#abb2bf;">Feeditem,Sitelink,2022-01-10,11331500,1538280,13773025337350
</span><span style="color:#abb2bf;">...
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-01,22510,2195,29762250000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-02,30870,3028,39394490000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-03,34893,3235,49813430000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-04,36100,3536,51433320000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-05,35080,3254,45976660000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-06,35026,3119,43464980000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-07,34720,3141,47812650000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-08,25587,2217,30435260000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-09,33713,2974,32842240000
</span><span style="color:#abb2bf;">Asset,Sitelink,2022-01-10,43669,3985,48636830000
</span></code></pre>
<p>To create a second plot on same page, we use <code>vis2</code> as the container name instead. Notice the added <strong>filter</strong> in <strong>transform</strong> step to only load the Sitelink extension type.</p>
<pre style="background-color:#2b303b;color:#6c7079;"><code><span style="color:#abb2bf;">\{% vega_chart(id=&quot;vis2&quot;) %\}
</span><span style="color:#abb2bf;">
</span><span style="color:#abb2bf;">    // Assign the specification to a local variable vlSpec.
</span><span style="color:#abb2bf;">    var vlSpec = {
</span><span style="color:#abb2bf;">        &quot;$schema&quot;: &quot;https://vega.github.io/schema/vega-lite/v5.json&quot;,
</span><span style="color:#abb2bf;">        &quot;width&quot;: 450,
</span><span style="color:#abb2bf;">        &quot;height&quot;: 300,
</span><span style="color:#abb2bf;">        &quot;data&quot;: {&quot;url&quot;: &quot;/combined_ad_extensions_ytd.csv&quot;},
</span><span style="color:#abb2bf;">        &quot;transform&quot;: [
</span><span style="color:#abb2bf;">            {&quot;filter&quot;: {&quot;field&quot;: &quot;type&quot;, &quot;oneOf&quot;: [&quot;Sitelink&quot;]}}
</span><span style="color:#abb2bf;">        ],
</span><span style="color:#abb2bf;">        &quot;mark&quot;: {
</span><span style="color:#abb2bf;">            &quot;type&quot;: &quot;bar&quot;,
</span><span style="color:#abb2bf;">            &quot;tooltip&quot;: true
</span><span style="color:#abb2bf;">        },
</span><span style="color:#abb2bf;">        &quot;encoding&quot;: {
</span><span style="color:#abb2bf;">            &quot;x&quot;: {
</span><span style="color:#abb2bf;">                &quot;field&quot;: &quot;date&quot;,
</span><span style="color:#abb2bf;">                &quot;type&quot;: &quot;temporal&quot;,
</span><span style="color:#abb2bf;">                &quot;bin&quot;: false, 
</span><span style="color:#abb2bf;">                &quot;sort&quot;: &quot;x&quot;
</span><span style="color:#abb2bf;">            },
</span><span style="color:#abb2bf;">            &quot;y&quot;: {
</span><span style="color:#abb2bf;">                &quot;field&quot;: &quot;impressions&quot;,
</span><span style="color:#abb2bf;">                &quot;type&quot;: &quot;quantitative&quot;,
</span><span style="color:#abb2bf;">            },
</span><span style="color:#abb2bf;">            &quot;color&quot;: {&quot;field&quot;: &quot;category&quot;, &quot;type&quot;: &quot;nominal&quot;},
</span><span style="color:#abb2bf;">        }
</span><span style="color:#abb2bf;">    };
</span><span style="color:#abb2bf;">
</span><span style="color:#abb2bf;">    // Embed the visualization in the container with id `vis`
</span><span style="color:#abb2bf;">    vegaEmbed(&#39;#vis2&#39;, vlSpec).then(function(result) {
</span><span style="color:#abb2bf;">    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
</span><span style="color:#abb2bf;">    }).catch(console.error);
</span><span style="color:#abb2bf;">
</span><span style="color:#abb2bf;">\{% end %\}
</span></code></pre>
<p><strong>YTD Daily Impressions for Sitelinks</strong></p>
<div id="vis2"></div>
<script>// Assign the specification to a local variable vlSpec.
    var vlSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 450,
        "height": 300,
        "data": {"url": "/combined_ad_extensions_ytd.csv"},
        "transform": [
            {"filter": {"field": "type", "oneOf": ["Sitelink"]}}
        ],
        "mark": {
            "type": "bar",
            "tooltip": true
        },
        "encoding": {
            "x": {
                "field": "date",
                "type": "temporal",
                "bin": false, 
                "sort": "x"
            },
            "y": {
                "field": "impressions",
                "type": "quantitative",
            },
            "color": {"field": "category", "type": "nominal"},
        }
    };

    // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis2', vlSpec).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);</script>
<p>Similarly, for Callout Extensions:</p>
<p><strong>YTD Daily Impressions for Callout</strong></p>
<div id="vis3"></div>
<script>// Assign the specification to a local variable vlSpec.
    var vlSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 450,
        "height": 300,
        "data": {"url": "/combined_ad_extensions_ytd.csv"},
        "transform": [
            {"filter": {"field": "type", "oneOf": ["Callout"]}}
        ],
        "mark": {
            "type": "bar",
            "tooltip": true
        },
        "encoding": {
            "x": {
                "field": "date",
                "type": "temporal",
                "bin": false, 
                "sort": "x"
            },
            "y": {
                "field": "impressions",
                "type": "quantitative",
            },
            "color": {"field": "category", "type": "nominal"},
        }
    };

    // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis3', vlSpec).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);</script>
<p>And for Structured Snippet:</p>
<p><strong>YTD Daily Impressions for Structured Snippet</strong></p>
<div id="vis4"></div>
<script>// Assign the specification to a local variable vlSpec.
    var vlSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 450,
        "height": 300,
        "data": {"url": "/combined_ad_extensions_ytd.csv"},
        "transform": [
            {"filter": {"field": "type", "oneOf": ["StructuredSnippet"]}}
        ],
        "mark": {
            "type": "bar",
            "tooltip": true
        },
        "encoding": {
            "x": {
                "field": "date",
                "type": "temporal",
                "bin": false, 
                "sort": "x"
            },
            "y": {
                "field": "impressions",
                "type": "quantitative",
            },
            "color": {"field": "category", "type": "nominal"},
        }
    };

    // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis4', vlSpec).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);</script>
<p>And finally for Promotion Extension:</p>
<p><strong>YTD Daily Impressions for Promotion Extension</strong></p>
<div id="vis5"></div>
<script>// Assign the specification to a local variable vlSpec.
    var vlSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 450,
        "height": 300,
        "data": {"url": "/combined_ad_extensions_ytd.csv"},
        "transform": [
            {"filter": {"field": "type", "oneOf": ["Promotion"]}}
        ],
        "mark": {
            "type": "bar",
            "tooltip": true
        },
        "encoding": {
            "x": {
                "field": "date",
                "type": "temporal",
                "bin": false, 
                "sort": "x"
            },
            "y": {
                "field": "impressions",
                "type": "quantitative",
            },
            "color": {"field": "category", "type": "nominal"},
        }
    };

    // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis5', vlSpec).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);</script><h2 id="summary">Summary</h2>
<p>Visualizing the daily impression changes across Asset-based Ad Extension migration reveals a number of trends:</p>
<ul>
<li>Some customers have Asset-based impressions since Jan 1st, 2022 to experiement with the new format</li>
<li>Bulk of Sitelinks, Callout, and Structured Snippet traffic shifts to Asset-based around Feb 17th, 2022</li>
<li>As of Apr 12, ~10% of trafficking Ad Extensions are still in Feeditem form</li>
<li>Towards the end of March, a downward trend appears across most of the extension types. Unclear if related to migration to Asset-based</li>
<li>Promotion Extension shows a very different periodic traffic pattern, with larger percentage still in Feeditem category</li>
</ul>

          </div>
        </article>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Search</p>
      </header>
      <section class="modal-card-body">
        <div class="field mb-2">
          <div class="control">
            <input class="input" id="search" placeholder="Search this website." type="search" />
          </div>
        </div>
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </section>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
           
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;michaelhuang.xyz&#x2F;posts&#x2F;quick-look-at-charts&#x2F;">
              Visualize NYC 311 Call Stats via Zola<span class="icon ml-2">
                <i class="fas fa-arrow-circle-right"></i>
              </span>
            </a>
          </div>
            
        </nav>
      </div>
    </div>
  </div>
</section>



  



  <footer class="footer py-4">
    <div class="content has-text-centered">
      <p>
        Built with
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-code"></i>
          </span>
          <span>code</span>
        </span>
        and
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-heart"></i>
          </span>
          <span>love</span>
        </span>
      </p>
      <p>
        Powered by
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-power-off"></i>
          </span>
          <span>zola</span>
        </span>
      </p>
    </div>
  </footer>

  
  
  
  <script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1.1.13/dist/chart.xkcd.min.js" integrity="sha384-xC3h1+IHXK8seA+8KfT79Z4e0GPsznjXBoMa5nd8ooWKplPyXx92NOmljWxLC/cs" crossorigin="anonymous"></script>
  
  
  <script src="https://michaelhuang.xyz/elasticlunr.min.js"></script>
  <script src="https://michaelhuang.xyz/search_index.en.js"></script><script src="https://michaelhuang.xyz/js/site.js"></script>

  





  
  
</body>

</html>
